--- a/arch/arm/boot/dts/intel-ixp43x-watchguard-xtm21w.dts	1970-01-01 12:00:00.000000000 +1200
+++ b/arch/arm/boot/dts/intel-ixp43x-watchguard-xtm21w.dts	2023-10-10 18:49:14.912883281 +1300
@@ -0,0 +1,139 @@
+// SPDX-License-Identifier: ISC
+/*
+ * Device Tree file for the Watchguard XTM21-W
+ * firewall device.
+ */
+
+/dts-v1/;
+
+#include "intel-ixp43x.dtsi"
+#include <dt-bindings/input/input.h>
+
+/ {
+        model = "Watchguard XTM21W";
+        compatible = "watchguard,xtm21w","intel,ixp43x";
+        #address-cells = <1>;
+        #size-cells = <1>;
+
+        memory@0 {
+                /*
+                 * The Watchuard XTM21W has 256 MB of memory
+                 */
+                device_type = "memory";
+                reg = <0x00000000 0x10000000>;
+        };
+
+        chosen {
+                bootargs = "console=ttyS0,115200n8 rootwait";
+                stdout-path = "uart0:115200n8";
+        };
+
+        aliases {
+                serial0 = &uart0;
+        };
+
+		i2c {
+			compatible = "i2c-gpio";
+			/*
+			 * Watchguard vendor kernel used IRQ 5 for SDA and IRQ 4 for SCL
+			 */
+			sda-gpios = <&gpio0 5 (GPIO_ACTIVE_HIGH|GPIO_OPEN_DRAIN)>;
+			scl-gpios = <&gpio0 4 (GPIO_ACTIVE_HIGH|GPIO_OPEN_DRAIN)>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+
+			/* RTC: Seiko Instruments S-35390A */
+			s35390a@30 {
+				compatible = "sii,s35390a";
+				reg = <0x30>;
+			};
+		};
+
+        soc {
+                interrupt-controller@c8003000 {
+                        compatible = "intel,ixp43x-interrupt";
+                };
+
+                bus@c4000000 {
+                        compatible = "intel,ixp43x-expansion-bus-controller", "syscon";
+                        /* Uses at least up to 0x230 */
+                        reg = <0xc4000000 0x1000>;
+
+                        /* 16 MB NOR FLASH */
+                        flash@0,0 {
+                                compatible = "intel,ixp4xx-flash", "cfi-flash";
+                                bank-width = <2>;
+                                /* Enable writes on the expansion bus */
+                                intel,ixp4xx-eb-write-enable = <1>;
+                                /* 16 MB of Flash mapped in at CS0 */
+                                reg = <0 0x00000000 0x1000000>;
+
+                                partitions {
+                                        compatible = "redboot-fis";
+                                        /*
+                                         * The stock Watchguard Redboot flash layout is staticly defined.
+                                         * Running 'fis init' will setup 3 partitions with different erasebock sizes.
+                                         * 0x000000000000-0x000000080000 : "RedBoot"
+                                         * 0x0000000f0000-0x0000000ff000 : "FIS directory"
+                                         * 0x0000000ff000-0x000000100000 : "RedBoot config"
+                                         *
+                                         * dev:  size   erasesize  name
+                                         * mtd0: 00080000 00010000 "RedBoot"
+                                         * mtd1: 0000f000 00008000 "FIS directory"
+                                         * mtd2: 00001000 00004000 "RedBoot config"
+                                         */
+                                        fis-index-block = <0xf>;
+                                };
+                        };
+						gpio-nand@1,0 {
+							/*
+							TODO
+							*/
+							compatible = "gpio-control-nand";
+							reg = <1 0x0000 0x2>;
+							#address-cells = <1>;
+							#size-cells = <1>;
+						};
+                };
+
+               	pci@c0000000 {
+					status = "ok";
+					/*
+					* Watchguard kernel did apply the PCI prefetch workaround (eg hammering errata)
+					* PCI: IXP43x Richland silicon detected - PCI Non-Prefetch Workaround Enabled
+					* Hence we set it to ixp42x-pci compatible to enforce this, despite being ixp43x
+					* FIXME: This workaround may not be required
+					*/
+					compatible = "intel,ixp42x-pci";
+					/*
+			 		* Taken from IXDP425 PCI boardfile.
+			 		* PCI slots on the BIXMB425BD base card.
+			 		* We have up to 4 slots (IDSEL) with 4 swizzled IRQs.
+			 		*/
+					#interrupt-cells = <1>;
+					interrupt-map-mask = <0xf800 0 0 7>;
+					interrupt-map =
+					/* IDSEL 1 */
+					<0x0800 0 0 1 &gpio0 11 IRQ_TYPE_LEVEL_LOW>, /* INT A on slot 1 is irq 11 */
+					<0x0800 0 0 2 &gpio0 10 IRQ_TYPE_LEVEL_LOW>, /* INT B on slot 1 is irq 10 */
+					<0x0800 0 0 3 &gpio0 9  IRQ_TYPE_LEVEL_LOW>, /* INT C on slot 1 is irq 9 */
+					<0x0800 0 0 4 &gpio0 8  IRQ_TYPE_LEVEL_LOW>, /* INT D on slot 1 is irq 8 */
+					/* IDSEL 2 */
+					<0x1000 0 0 1 &gpio0 10 IRQ_TYPE_LEVEL_LOW>, /* INT A on slot 2 is irq 10 */
+					<0x1000 0 0 2 &gpio0 9  IRQ_TYPE_LEVEL_LOW>, /* INT B on slot 2 is irq 9 */
+					<0x1000 0 0 3 &gpio0 8  IRQ_TYPE_LEVEL_LOW>, /* INT C on slot 2 is irq 8 */
+					<0x1000 0 0 4 &gpio0 11 IRQ_TYPE_LEVEL_LOW>, /* INT D on slot 2 is irq 11 */
+					/* IDSEL 3 */
+					<0x1800 0 0 1 &gpio0 9  IRQ_TYPE_LEVEL_LOW>, /* INT A on slot 3 is irq 9 */
+					<0x1800 0 0 2 &gpio0 8  IRQ_TYPE_LEVEL_LOW>, /* INT B on slot 3 is irq 8 */
+					<0x1800 0 0 3 &gpio0 11 IRQ_TYPE_LEVEL_LOW>, /* INT C on slot 3 is irq 11 */
+					<0x1800 0 0 4 &gpio0 10 IRQ_TYPE_LEVEL_LOW>, /* INT D on slot 3 is irq 10 */
+					/* IDSEL 4 */
+					<0x2000 0 0 1 &gpio0 8  IRQ_TYPE_LEVEL_LOW>, /* INT A on slot 4 is irq 8 */
+					<0x2000 0 0 2 &gpio0 11 IRQ_TYPE_LEVEL_LOW>, /* INT B on slot 4 is irq 11 */
+					<0x2000 0 0 3 &gpio0 10 IRQ_TYPE_LEVEL_LOW>, /* INT C on slot 4 is irq 10 */
+					<0x2000 0 0 4 &gpio0 9  IRQ_TYPE_LEVEL_LOW>; /* INT D on slot 4 is irq 9 */
+				};
+
+       };
+};
